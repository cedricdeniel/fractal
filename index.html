<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Fractal</title>
</head>
<body>

    <canvas id="planComplexe" width="900" height="900"><p>Désolé, votre navigateur ne supporte pas Canvas.</p></canvas>

    <script>
        var xmin=-2, xmax=1, ymin=-1.5, ymax=1.5;
        var rayon=5;
        axes();

        figure();

        function figure() {
            var delta=0.05;
            for (var i=xmin ; i<xmax; i=i+delta) {
                for (var j=ymin ; j<ymax; j=j+delta) {
                    if (quad([i,j])) {point([i,j]);}
                }
            }
        }

        function quad(c) {
            z = [0,0];
            for (i=0 ; i<20 ; i++) {
                zp = add(mult(z,z),c);
                z[0]=zp[0];
                z[1]=zp[1];
            }
            if (dist(z)<10) { return true; }
            else { return false; }
        }


        function geom(c) {
            z = [1,0];
            for (i=0 ; i<10 ; i++) {
                zp = mult(z,c);
                z[0]=zp[0];
                z[1]=zp[1];
            }
            if (dist(z)<10) { return true; }
            else { return false; }
        }

        function add(z1,z2) {
            return [z1[0]+z2[0],z1[1]+z2[1]];
        }

        function mult(z1,z2) {
            return [z1[0]*z2[0]-z1[1]*z2[1],z1[0]*z2[1]+z1[1]*z2[0]];
        }

        function dist(z) {
            return Math.sqrt(z[0]*z[0]+z[1]*z[1]);
        }

        function point(z) {
            var canvas  = document.querySelector('#planComplexe');
            var context = canvas.getContext('2d');
            context.fillStyle = "rgb(0,0,0)";
            context.beginPath();
            context.arc(x(z[0]), y(z[1]), rayon, 0, 2 * Math.PI);
            context.fill();
        }

        function axes() {
            var canvas  = document.querySelector('#planComplexe');
            var context = canvas.getContext('2d');
            context.clearRect ( 0 , 0 , canvas.width, canvas.height );
            context.beginPath();
            context.moveTo(x(0),y(ymin));
            context.lineTo(x(0),y(ymax));
            context.moveTo(x(xmin),y(0));
            context.lineTo(x(xmax),y(0));
            for (var i=Math.floor(xmin) ; i<xmax ; i++) {
                context.moveTo(x(i),y(-0.05));
                context.lineTo(x(i),y(0.05));
            }
            for (var i=Math.floor(ymin) ; i<ymax ; i++) {
                context.moveTo(x(-0.05),y(i));
                context.lineTo(x(0.05),y(i));
            }
            context.stroke();
        }

        function x(re) {
            return (re-xmin)*900/(xmax-xmin);
        }

        function y(im) {
            return 900-(im-ymin)*900/(ymax-ymin);
        }

    </script>

</body>
</html>
