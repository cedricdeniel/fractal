<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Fractal</title>
</head>
<body>
    <header>
        <button type="button" id="btn-draw-geom">Geometric</button>
        <button type="button" id="btn-draw-quad">Quadratic</button>
        <button type="button" id="btn-draw-reset">Reset</button>
    </header>
    <section>
        <canvas id="plan" width="900" height="900"><p>Désolé, votre navigateur ne supporte pas Canvas.</p></canvas>
    </section>

    <script src="js/math.js"></script>
    <script src="js/mplan.js"></script>
    <script>
        (function() {

            mplan('#plan', {
                scale       : [300, 300],
                center      : [-0.5, 0],
                radius      : 3,
                drawAxis    : true,
            });

            var canvas  = document.querySelector('#plan');

            drawNoop();

            document.querySelector('#btn-draw-reset').addEventListener('click', function() {
                drawNoop();
            });

            document.querySelector('#btn-draw-geom').addEventListener('click', function() {
                drawGeometric();
            });

            document.querySelector('#btn-draw-quad').addEventListener('click', function() {
                drawQuadratic();
            });

            /**
             * drawNoop
             */
            function drawNoop()
            {
                canvas.getFrame()
                    .draw(function() {})
                    .draw()
                ;
            }

            /**
             * drawQuadratic
             */
            function drawQuadratic()
            {
                canvas.getFrame()
                    .draw(quadraticShape)
                    .draw()
                ;
            }

            /**
             * drawGeometric
             */
            function drawGeometric()
            {
                canvas.getFrame()
                    .draw(geometricShape)
                    .draw()
                ;
            }

            /**
             * quadraticShape
             * @param draw
             * @returns void
             */
            function quadraticShape(draw)
            {
                var minMax = draw.getFrame().getMinMax();

                var xmin = minMax[0],
                    xmax = minMax[1],
                    ymin = minMax[2],
                    ymax = minMax[3];

                var delta = 0.025, i, j;

                for (i=xmin ; i<xmax; i=i+delta) {

                    for (j=ymin ; j<ymax; j=j+delta) {

                        if (quad([i,j])) {
                            draw.point([i,j]);

                        }
                    }
                }
            }

            /**
             * geometricShape
             * @param draw
             * @returns void
             */
            function geometricShape(draw)
            {
                var minMax = draw.getFrame().getMinMax();

                var xmin = minMax[0],
                    xmax = minMax[1],
                    ymin = minMax[2],
                    ymax = minMax[3];

                var delta = 0.025, i, j;

                for (i=xmin ; i<xmax; i=i+delta) {

                    for (j=ymin ; j<ymax; j=j+delta) {

                        if (geom([i,j])) {
                            draw.point([i,j]);
                        }
                    }
                }
            }

            /**
             * quad
             * @param c
             * @returns {boolean}
             */
            function quad(c)
            {
                var z = [0,0], i;

                for (i=0; i<20; i++) {
                    z = Math.cplxAdd(Math.cplxPow(z, 2), c);
                }

                if (Math.modulus(z) < 10) {
                    return true;
                } else {
                    return false;
                }
            }

            /**
             * geom
             * @param c
             * @returns {boolean}
             */
            function geom(c)
            {
                var z = [1,0], i;

                for (i=0; i<10; i++) {
                    z = Math.cplxMult(z, c);
                }

                if (Math.modulus(z) < 10) {
                    return true;
                } else {
                    return false;
                }
            }
        })();
    </script>

</body>
</html>
