<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Fractal</title>
</head>
<body>

    <canvas id="planComplexe" width="900" height="900"><p>Désolé, votre navigateur ne supporte pas Canvas.</p></canvas>

    <script>
        var xmin=-2, xmax=1, ymin=-1.5, ymax=1.5;
        var rayon=5;
        axes();

        figure();

        /**
         * figure
         */
        function figure()
        {
            var delta=0.05;
            for (var i=xmin ; i<xmax; i=i+delta) {
                for (var j=ymin ; j<ymax; j=j+delta) {
                    if (quad([i,j])) {point([i,j]);}
                }
            }
        }

        /**
         * quad
         * @param c
         * @returns {boolean}
         */
        function quad(c)
        {
            var z = [0,0];
            for (var i=0 ; i<20 ; i++) {
                z = add(mult(z,z),c);
            }
            if (dist(z)<10) { return true; }
            else { return false; }
        }

        /**
         * geom
         * @param c
         * @returns {boolean}
         */
        function geom(c)
        {
            var z = [1,0];
            for (var i=0 ; i<10 ; i++) {
                z = mult(z,c);
            }
            if (dist(z)<10) { return true; }
            else { return false; }
        }

        /**
         * add
         * @param z1
         * @param z2
         * @returns {*[]}
         */
        function add(z1,z2)
        {
            return [z1[0]+z2[0],z1[1]+z2[1]];
        }

        /**
         * multi
         * @param z1
         * @param z2
         * @returns {number[]}
         */
        function mult(z1,z2)
        {
            return [z1[0]*z2[0]-z1[1]*z2[1],z1[0]*z2[1]+z1[1]*z2[0]];
        }

        /**
         * dist
         * @param z
         * @returns {number}
         */
        function dist(z)
        {
            return Math.sqrt(z[0]*z[0]+z[1]*z[1]);
        }

        /**
         * point
         * @param z
         */
        function point(z)
        {
            var canvas  = document.querySelector('#planComplexe');
            var context = canvas.getContext('2d');
            context.fillStyle = "rgb(0,0,0)";
            context.beginPath();
            context.arc(x(z[0]), y(z[1]), rayon, 0, 2 * Math.PI);
            context.fill();
        }

        /**
         * axes
         */
        function axes()
        {
            var canvas  = document.querySelector('#planComplexe');
            var context = canvas.getContext('2d');
            context.clearRect ( 0 , 0 , canvas.width, canvas.height );
            context.beginPath();
            context.moveTo(x(0),y(ymin));
            context.lineTo(x(0),y(ymax));
            context.moveTo(x(xmin),y(0));
            context.lineTo(x(xmax),y(0));
            for (var i=Math.floor(xmin) ; i<xmax ; i++) {
                context.moveTo(x(i),y(-0.05));
                context.lineTo(x(i),y(0.05));
            }
            for (var i=Math.floor(ymin) ; i<ymax ; i++) {
                context.moveTo(x(-0.05),y(i));
                context.lineTo(x(0.05),y(i));
            }
            context.stroke();
        }

        /**
         * x
         * @param re
         * @returns {number}
         */
        function x(re)
        {
            return (re-xmin)*900/(xmax-xmin);
        }

        /**
         * y
         * @param im
         * @returns {number}
         */
        function y(im)
        {
            return 900-(im-ymin)*900/(ymax-ymin);
        }

    </script>

</body>
</html>
