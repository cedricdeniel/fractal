(()=>{var t={571:()=>{Math.cplxAdd=function(t,e){return[t[0]+e[0],t[1]+e[1]]},Math.cplxMult=function(t,e){return[t[0]*e[0]-t[1]*e[1],t[0]*e[1]+t[1]*e[0]]},Math.cplxPow=function(t,e){if(0===e)return[1,0];if(1===e)return t;for(var n=t,r=2;r<=e;r++)n=Math.cplxMult(n,t);return n},Math.modulus=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var u=e[r]={exports:{}};return t[r](u,u.exports,n),u.exports}(()=>{"use strict";function t(t){return t=t||2,function(e){return o(r([0,0],e,t),2e3,2)}}function e(t,e){return e=e||2,function(n){return o(r(n,t,e),2e3,2)}}function r(t,e,n){var r=t;return function(){return r=Math.cplxAdd(Math.cplxPow(r,n),e)}}function o(t,e,n){for(var r=0;r<e;r++)if(Math.modulus(t())>=n)return r;return null}n(571);const u={mandelbrot:t(),dendrite:e([0,1]),geometric:function(t){return o(function(t,e){var n=[1,0];return function(){return n=Math.cplxMult(n,e)}}(0,t),2e3,2)},buildMandelbrotSet:t,buildJuliaSet:e};var a={scale:[300,300],ppup:[.8,.8],center:[-.5,0],radius:1,drawAxis:!1};(function(t,e){var n=document.querySelector(t);if(null!==n&&"CANVAS"===n.nodeName){var r=function(t,e){var r=new DOMMatrix;s(1,0,0,-1,t.width/2,t.height/2);var o={scale:e.scale?e.scale:[1,1],ppup:e.ppup?e.ppup:[1,1],center:e.center?e.center:[0,0],radius:e.radius?e.radius:1,drawAxis:!("drawAxis"in e)||!!e.drawAxis,defaultColor:e.defaultColor?e.defaultColor:"#000000",zoom:null};o.defaultScale=o.scale;var u=function(){console.log("noop")},a={clear:function(){f().clearRect(0,0,t.width,t.height)},point:function(t,e){e=e||d("defaultColor");var n=f();n.fillStyle=e,n.fillRect(t[0],t[1],d("radius"),d("radius"))},getFrame:function(){return i}},i={setScale:function(t){l("scale",t),l("zoom",[t[0]/d("defaultScale")[0],t[1]/d("defaultScale")[1]]),this.setCenter(d("center"))},setZoom:function(t){l("zoom",t),l("scale",[d("defaultScale")[0]*t[0],d("defaultScale")[1]*t[1]]),this.setCenter(d("center"))},setCenter:function(e){l("center",e);var n=h(e,d("scale")),r=v();r.e=t.width/2-r.a*n[0],r.f=t.height/2-r.d*n[1],s(r)},setRadius:function(t){l("radius",t)},setDrawAxis:function(t){l("drawAxis",!!t)},setDefaultColor:function(t){l("defaultColor",t)},setOption:l,getOption:d,getCanvas:function(){return t},transformGlobalToLocal:g,transformLocalToGlobal:p,getMinMax:w,draw:function(){return console.log("%cDrawing...","font-weight:800;"),console.log("Origin","[",d("center")[0],",",d("center")[1],"]"),console.log("Zoom","x",d("zoom")[0]),arguments.length?"function"==typeof arguments[0]&&(u=arguments[0]):(a.clear(),u(a),m()),this}};return i.setCenter(d("center")),i.setScale(d("scale")),n.addEventListener("click",c("in")),n.addEventListener("contextmenu",c("out")),i;function c(t){return"in"!==t&&"out"!==t&&(t="in"),function(e){e.stopPropagation(),e.preventDefault();var n=g([e.offsetX,e.offsetY]),r="out"===t?[d("zoom")[0]/2,d("zoom")[0]/2]:[2*d("zoom")[0],2*d("zoom")[0]];i.setCenter(n),i.setZoom(r),i.draw()}}function l(t,e){t in o&&(o[t]=e)}function d(t){return t in o?o[t]:null}function f(){return t.getContext("2d")}function s(t,e,n,o,u,a){r=t instanceof DOMMatrix?t:new DOMMatrix(arguments)}function v(){return r}function m(){if(d("drawAxis")){var t,e,n,r=w(),o=r[0],u=r[1],a=r[2],i=r[3],c=f(),l=p([o,0]),s=p([u,0]),v=p([0,a]),m=p([0,i]);for(c.strokeStyle=d("defaultColor"),c.beginPath(),c.moveTo(l[0],l[1]),c.lineTo(s[0],s[1]),c.moveTo(v[0],v[1]),c.lineTo(m[0],m[1]),t=Math.floor(o);t<u;t++)e=p([t,-.05]),n=p([t,.05]),c.moveTo(e[0],e[1]),c.lineTo(n[0],n[1]);for(t=Math.floor(a);t<i;t++)e=p([-.05,t]),n=p([.05,t]),c.moveTo(e[0],e[1]),c.lineTo(n[0],n[1]);c.stroke()}}function h(t,e){return[t[0]*e[0],t[1]*e[1]]}function p(t){t=h(t,d("scale"));var e=v();return[e.a*t[0]+e.e,e.d*t[1]+e.f]}function g(t){var e=v();t=[(t[0]-e.e)/e.a,(t[1]-e.f)/e.d];var n=d("scale");return h(t,[1/n[0],1/n[1]])}function w(){var e,n,r,o,u=g([0,0]),a=g([t.width,t.height]);return u[0]<a[0]?(e=u[0],n=a[0]):(e=a[0],n=u[0]),u[1]<a[1]?(r=u[1],o=a[1]):(r=a[1],o=u[1]),[e,n,r,o]}}(n,e=e||{});n.getFrame=function(){return r}}})("#plan",a),function(t,e){var n=e||{},r=t.querySelector("#inpt-draw-axis");r.checked=n.drawAxis,r.addEventListener("click",(function(t){t.stopPropagation();var e=i.getFrame();e.setDrawAxis(r.checked),window.setTimeout((function(){e.draw()}))}))}(document.querySelector("form"),a);var i=document.querySelector("#plan"),c=s((function(){})),l=s(v(u.geometric)),d=s(v(u.mandelbrot)),f=s(v(u.dendrite));function s(t){return function(){i.getFrame().draw(t).draw()}}function v(t){return function(e){for(var n=e.getFrame(),r=n.getCanvas().getBoundingClientRect(),o=n.getOption("ppup"),u=Math.round(1/o[0]),a=Math.round(1/o[1]),i=[],c=0;c<r.width;c+=u)for(var l=0;l<r.height;l+=a){var d=n.transformGlobalToLocal([c,l]),f=t(d);null!==f&&(void 0===i[f]&&(i[f]=[]),i[f].push([c,l]))}var s=i.reduce((function(t,e){return t+(Array.isArray(e)?e.length:0)}),0),v=0;i.map((function(t){if(Array.isArray(t)&&0!==t.length){var n,r,o,u=(n=(v+=t.length)/s,r=[2,1,0],o=[8,.7,.8],"hsl("+(Math.round(n*(o[0]-r[0]))+r[0])%360+","+Math.round(100*(n*(o[1]-r[1])+r[1]))+"%,"+Math.round(100*(n*(o[2]-r[2])+r[2]))+"%)");t.map((function(t){e.point([t[0],t[1]],u)}))}}))}}d(),document.querySelector("#btn-draw-reset").addEventListener("click",c),document.querySelector("#btn-draw-geom").addEventListener("click",l),document.querySelector("#btn-draw-mbrot").addEventListener("click",d),document.querySelector("#btn-draw-julia-1").addEventListener("click",f),document.querySelector("#btn-draw-julia-2").addEventListener("click",s(v(u.buildJuliaSet([-1.476,0])))),document.querySelector("#btn-draw-julia-3").addEventListener("click",s(v(u.buildJuliaSet([-.8,0])))),document.querySelector("#btn-draw-julia-4").addEventListener("click",s(v(u.buildJuliaSet([.285,.013]))))})()})();